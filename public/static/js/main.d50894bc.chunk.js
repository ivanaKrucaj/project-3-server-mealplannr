(this.webpackJsonpmealpannr=this.webpackJsonpmealpannr||[]).push([[0],{33:function(e,a,t){},36:function(e,a,t){e.exports=t.p+"static/media/plate-img.08ec29f7.png"},39:function(e,a,t){e.exports=t(79)},44:function(e,a,t){},47:function(e,a,t){},64:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(34),i=t.n(r),c=(t(44),t(21)),s=t(6),o=t(7),m=t(9),p=t(8),d=t(4),u=(t(45),t(46),t(47),t(3)),g=t.n(u),h={API_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_URL||"https://mealplannr.herokuapp.com/api"},E=t(2),v=(t(64),t(14)),b=t.n(v);t(67),t(68);function f(e){var a=e.numberOfItemsInBasket>0?"".concat(e.numberOfItemsInBasket):"",t=e.loggedInUser?l.a.createElement(l.a.Fragment,null,e.loggedInUser.username,"'s Account "):"User Account";return l.a.createElement("div",{className:"intro-div fixed-top"},l.a.createElement("div",{className:"my-nav"},l.a.createElement("nav",{class:"navbar navbar-expand my-navbar"},l.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{class:"navbar-toggler-icon"})),l.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNavDropdown"},l.a.createElement("ul",{class:"navbar-nav nav-list"},l.a.createElement("li",{class:"nav-item"},l.a.createElement(E.b,{to:"/home",class:"nav-link"},"Home")),l.a.createElement("li",{class:"nav-item"},l.a.createElement(E.b,{to:"/mealplan-basket",class:"nav-link"},"Mealplan Basket ",l.a.createElement("span",{class:"badge badge-pill badge-danger"},a))),l.a.createElement("li",{class:"nav-item"},l.a.createElement(E.b,{to:"/create-recipe",class:"nav-link"},"Create Recipe")),l.a.createElement("li",{class:"nav-item dropright"},l.a.createElement(E.b,{class:"nav-link dropdown-toggle",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t),l.a.createElement("div",{class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},l.a.createElement(E.b,{to:"/mealplans",class:"dropdown-item"},"My Mealplans"),l.a.createElement(E.b,{to:"/my-recipes",class:"dropdown-item"},"My Recipes"),l.a.createElement("div",{class:"dropdown-divider"}),l.a.createElement(E.b,{class:"dropdown-item logout-item",onClick:e.onLogout},"Logout"))))))))}t(73);function y(e){return e.loading?l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading..."))):l.a.createElement("div",null,l.a.createElement("div",{className:"home-recipes"},e.filteredRecipes.map((function(a,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"card recipe-card",style:{width:"18rem"},key:t},l.a.createElement(E.b,{to:"/recipe/".concat(a._id)},l.a.createElement("img",{src:a.image,class:"card-img-top",alt:"recipe-img"})),l.a.createElement("div",{class:"card-body"},l.a.createElement(E.b,{to:"/recipe/".concat(a._id),className:"recipe-title"},l.a.createElement("h5",{class:"card-title"},a.title)),l.a.createElement("button",{class:"btn add-mealplan-btn",onClick:function(t){return e.onAddToMealplan(t,a)}},"Add to Mealplan"))))}))))}function N(e){if(!e.loggedInUser)return l.a.createElement("div",null,l.a.createElement("div",{className:"mealplan-basket-jumbotron"},l.a.createElement("div",{class:"jumbotron"},l.a.createElement("h5",{class:"lead"},"Your are not logged in."),l.a.createElement(E.b,{to:"/login",class:"btn add-mealplan-btn"},"Log in"))));if(e.loading)return l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")));return l.a.createElement(l.a.Fragment,null,0===e.mealplanBasket.length?l.a.createElement("div",{className:"mealplan-basket-jumbotron"},l.a.createElement("div",{class:"jumbotron"},l.a.createElement("h5",{class:"lead"},"Your mealplan basket is empty."),l.a.createElement("p",{className:"jumbo-par"},"Create a personalized mealplan in just a few clicks ."),l.a.createElement(E.b,{to:"/home",class:"btn add-mealplan-btn"},"Add recipes"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"mealplan-basket-div container"},l.a.createElement("h1",{className:"recipes-title"},"Mealplan Basket"),l.a.createElement("form",{onSubmit:e.onSaveMealplan,className:"mealplan-name-form"},l.a.createElement("input",{type:"text",className:"mealplan-input",name:"mealplanName",placeholder:"Mealplan name"}),l.a.createElement("button",{type:"submit",className:"btn save-mealplan-btn"},"Save mealplan")),l.a.createElement("div",{className:"home-recipes"},e.mealplanBasket.map((function(a,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"card basket-card",style:{width:"18rem"},key:t},l.a.createElement(E.b,{to:"/recipe/".concat(a._id)},l.a.createElement("img",{src:a.image,class:"card-img-top",alt:"..."}),l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},a.title))),l.a.createElement("div",{className:"delete-div"},l.a.createElement("button",{className:"btn mealplan-basket-delete",onClick:function(){e.onDelete(a)}},"Remove"))))}))))))}t(74);var k=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).handleCreateRecipe=function(a){a.preventDefault();var t=a.target.title.value,n=a.target.steps.value,l=a.target.ingredients.value,r=a.target.type.value,i=a.target.portions.value,c=a.target.image.files[0],s=new FormData;s.append("imageUrl",c),g.a.post("".concat(h.API_URL,"/upload"),s).then((function(a){g.a.post("".concat(h.API_URL,"/recipe"),{title:t,steps:n,ingredients:l,type:r,image:a.data.secure_url,number_of_portions:i,user:e.props.loggedInUser},{withCredentials:!0}).then((function(a){e.props.onRecipeCreated(a.data)}))}))},e}return Object(o.a)(t,[{key:"render",value:function(){return this.props.loggedInUser?this.props.loading?l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading..."))):l.a.createElement("div",{className:"create-recipe-div"},l.a.createElement("h1",{className:"recipes-title"},"Create recipe"),l.a.createElement("div",{className:"recipe-form"},l.a.createElement("form",{onSubmit:this.handleCreateRecipe},l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"text",name:"title",class:"form-control create-form-input",placeholder:"Title"})),l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"file",name:"image",class:"form-control create-file-input"})),l.a.createElement("div",{class:"form-group"},l.a.createElement("textarea",{class:"form-control create-steps-input",name:"steps",rows:"5",placeholder:"Steps"})),l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"text",name:"ingredients",class:"form-control create-ingredient-input",placeholder:"Ingredients"})),l.a.createElement("div",{className:"form-group type-portion-div"},l.a.createElement("select",{name:"type",className:"select-type"},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Meal type"),l.a.createElement("option",null,"Breakfast"),l.a.createElement("option",null,"Lunch"),l.a.createElement("option",null,"Dinner"),l.a.createElement("option",null,"Snack")),l.a.createElement("input",{type:"number",min:"0",name:"portions",class:"form-control portions-input",placeholder:"Portions"})),l.a.createElement("div",{className:"submit-form-bnt-div"},l.a.createElement("button",{type:"submit",class:"btn submit-btn"},"Submit recipe"))))):l.a.createElement("div",null,l.a.createElement("div",{className:"mealplan-basket-jumbotron"},l.a.createElement("div",{class:"jumbotron"},l.a.createElement("h5",{class:"lead"},"Your are not logged in."),l.a.createElement(E.b,{to:"/login",class:"btn add-mealplan-btn"},"Log in"))))}}]),t}(l.a.Component);t(75);function w(){var e=(new Date).getFullYear();return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:{padding:"18px 0 ",textAlign:"center",backgroundColor:"#e9da5d",margin:"0",fontWeight:"400",fontSize:"13px"}},"Created by the Mealplannr \xa9 ",e))}t(33);function S(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{class:"form-signin",onSubmit:e.onLogin},l.a.createElement("div",{class:"text-center mb-4"},l.a.createElement("h1",{class:"h3 mb-3 login-title"},"Welcome back!")),l.a.createElement("div",{class:"form-label-group"},l.a.createElement("input",{type:"email",name:"email",class:"form-control form-input",placeholder:"Email"})),l.a.createElement("div",{class:"form-label-group"},l.a.createElement("input",{type:"password",name:"password",class:"form-control form-input",placeholder:"Password"})),l.a.createElement("div",null,l.a.createElement("button",{class:"btn btn-lg btn-login btn-trans",type:"submit"},"Sign in"))))}function _(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{class:"form-signin",onSubmit:e.onSignup},l.a.createElement("div",{class:"text-center mb-4"},l.a.createElement("h1",{class:"h3 mb-3 login-title"},"Not a member yet?")),l.a.createElement("div",{class:"form-label-group"},l.a.createElement("input",{type:"text",name:"username",class:"form-control form-input",placeholder:"Username"})),l.a.createElement("div",{class:"form-label-group"},l.a.createElement("input",{type:"email",name:"email",class:"form-control form-input",placeholder:"Email"})),l.a.createElement("div",{class:"form-label-group"},l.a.createElement("input",{type:"password",name:"password",class:"form-control form-input",placeholder:"Password",required:""})),l.a.createElement("div",null,l.a.createElement("button",{class:"btn btn-lg btn-signup btn-trans",type:"submit"},"Create an account"))))}t(76);var C=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={loading:!0},e.calculateRecipeNutrition=function(e){return e.ingredients.reduce((function(a,t){return{calories:a.calories+t.calories/e.number_of_portions,fat:a.fat+t.fat/e.number_of_portions,protein:a.protein+t.protein/e.number_of_portions,carbs:a.carbs+t.carbs/e.number_of_portions}}),{calories:0,fat:0,protein:0,carbs:0})},e.sanitizeIngredient=function(e){return e.quantity_unit.includes(e.title)?"".concat(e.quantity," ").concat(e.title):" ".concat(e.quantity," ").concat(e.quantity_unit,"  ").concat(e.title)},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.recipe_id;g.a.get("".concat(h.API_URL,"/recipe/").concat(a),{withCredentials:!0}).then((function(a){e.setState({recipe:a.data,loading:!1})})).catch((function(e){}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")));var a=this.state.recipe,t=a.title,n=a.image,r=a.steps,i=a.ingredients,c=a.number_of_portions,s=a.type,o=this.calculateRecipeNutrition(this.state.recipe),m=o.calories,p=o.fat,d=o.protein,u=o.carbs;return console.log(this.calculateRecipeNutrition(this.state.recipe)),l.a.createElement("div",{className:"recipe-detail-div"},l.a.createElement("div",{className:"row recipe-detail-teaser"},l.a.createElement("div",{className:"col-6 img-div"},l.a.createElement("img",{src:n,alt:"recipe-img",className:"recipe-detail-img"})),l.a.createElement("div",{className:"col-6 title-div"},l.a.createElement("h1",{className:"recipe-title"},t),l.a.createElement("div",{className:"recipe-info-div"},l.a.createElement("p",{className:"recipe-type"},s),l.a.createElement("p",null,"Serves  ",l.a.createElement("b",null,c))))),l.a.createElement("div",{className:"col-12 recipe-detail-tabs"},l.a.createElement("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},l.a.createElement("li",{class:"nav-item",role:"presentation"},l.a.createElement("a",{class:"nav-link active recipe-detail-nav",id:"method-tab","data-toggle":"tab",href:"#method",role:"tab","aria-controls":"method","aria-selected":"true"},"Method")),l.a.createElement("li",{class:"nav-item",role:"presentation"},l.a.createElement("a",{class:"nav-link recipe-detail-nav",id:"nutrition-tab","data-toggle":"tab",href:"#nutrition",role:"tab","aria-controls":"nutrition","aria-selected":"false"},"Nutrition")),l.a.createElement("li",{class:"nav-item",role:"presentation"},l.a.createElement("a",{class:"nav-link recipe-detail-nav",id:"ingredients-tab","data-toggle":"tab",href:"#ingredients",role:"tab","aria-controls":"ingredients","aria-selected":"false"},"Ingredients"))),l.a.createElement("div",{class:"tab-content",id:"myTabContent"},l.a.createElement("div",{class:"tab-pane active tab-method",id:"method",role:"tabpanel","aria-labelledby":"method-tab"},l.a.createElement("p",{className:"method-par"},r)),l.a.createElement("div",{class:"tab-pane tab-nutrition",id:"nutrition",role:"tabpanel","aria-labelledby":"nutrition-tab"},l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"nutrition-tab-title"},"Nutrition Facts"),l.a.createElement("table",{class:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Nutrients"),l.a.createElement("th",{scope:"col"},"Amount Per Serving"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Calories"),l.a.createElement("td",null,m.toFixed(1)," kcal")),l.a.createElement("tr",null,l.a.createElement("td",null,"Fat"),l.a.createElement("td",null,p.toFixed(1)," g")),l.a.createElement("tr",null,l.a.createElement("td",null,"Protein"),l.a.createElement("td",null,d.toFixed(1)," g")),l.a.createElement("tr",null,l.a.createElement("td",null,"Carbs"),l.a.createElement("td",null,u.toFixed(1)," g")))))),l.a.createElement("div",{class:"tab-pane tab-ingredients",id:"ingredients",role:"tabpanel","aria-labelledby":"ingredients-tab"},l.a.createElement("h3",{className:"nutrition-tab-title"},"Recipe ingredients"),l.a.createElement("ul",{className:"ingredients-container"},i.map((function(a,t){return l.a.createElement("li",{key:t},l.a.createElement(b.a,{class:"fa fa-apple",name:"apple",style:{color:"lightgray",fontSize:"13px"}}),e.sanitizeIngredient(a))})))))))}}]),t}(l.a.Component),L=t(36),I=t.n(L);function O(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header-div"},l.a.createElement("div",{className:"header-title-parent"},l.a.createElement("h1",{className:"header-div-title"},"Mealplannr")),l.a.createElement("div",{className:"header-teaser row"},l.a.createElement("div",{className:"text-teaser-div col-4"},l.a.createElement("h1",{className:"teaser-title"},"Quick and Easy Way ",l.a.createElement("br",null)," to Healthier Life"),l.a.createElement("p",{className:"teaser-par"},"Use our Meal Planning Tool ",l.a.createElement("br",null)," to Add Recipes to Your Meal Plan."),l.a.createElement(E.b,{to:"/login"},l.a.createElement("button",{className:"login-btn btn btn-lg"},"Get your meal plan!"))),l.a.createElement("div",{className:"header-img-div col-3"},l.a.createElement("img",{src:I.a,alt:"background-img",className:"header-img"})))))}var R=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={mealplans:[],filteredMealplans:[],loading:!0},e.loadMealplans=function(){g.a.get("".concat(h.API_URL,"/mealplans"),{withCredentials:!0}).then((function(a){console.log(a.data),e.setState({mealplans:a.data,loading:!1,filteredMealplans:a.data})})).catch((function(e){console.log(e)}))},e.deleteMealplan=function(a){g.a.delete("".concat(h.API_URL,"/mealplan/").concat(a),{withCredentials:!0}).then((function(a){e.loadMealplans()}))},e.filterMealplan=function(a){var t=a.target.value,n=e.state.mealplans.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));e.setState({filteredMealplans:n})},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadMealplans()}},{key:"render",value:function(){var e=this;return this.props.loggedInUser?this.state.loading?l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading..."))):l.a.createElement("div",{className:"mealplans-page-div"},l.a.createElement("div",{className:"mealplan-header"},l.a.createElement("h1",{className:"recipes-title"},"My Mealplans"),l.a.createElement("div",{class:"field"},l.a.createElement("div",{class:"control has-icons-left has-icons-right"},l.a.createElement("input",{class:"input is-rounded",name:"recipe",type:"text",onChange:this.filterMealplan,placeholder:"Search"}),l.a.createElement("span",{class:"icon is-left"},l.a.createElement(b.a,{class:"fa fa-search",name:"search",size:"1x",style:{color:"lightgrey"}}))))),l.a.createElement("div",{className:"all-mealplans-div"},this.state.filteredMealplans.map((function(a,t){return l.a.createElement("div",{key:t,class:"card recipe-card",style:{width:"18rem"}},l.a.createElement(E.b,{to:"/mealplan/".concat(a._id)},l.a.createElement("img",{src:a.recipes[0].image,class:"card-img-top",alt:"recipe-img"})),l.a.createElement("div",{class:"card-body"},l.a.createElement(E.b,{to:"/mealplan/".concat(a._id)},l.a.createElement("h5",{class:"card-title"},a.title))),l.a.createElement("div",{className:"delete-div"},l.a.createElement("button",{className:"btn mealplan-basket-delete",onClick:function(){e.deleteMealplan(a._id)}},"Delete mealplan")))})))):l.a.createElement("div",null,l.a.createElement("div",{className:"mealplan-basket-jumbotron"},l.a.createElement("div",{class:"jumbotron"},l.a.createElement("h5",{class:"lead"},"Your are not logged in."),l.a.createElement(E.b,{to:"/login",class:"btn add-mealplan-btn"},"Log in"))))}}]),t}(l.a.Component),U=t(37),M=(t(77),function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={mealplan:[],loading:!0},e.loadMealplan=function(a){g.a.get("".concat(h.API_URL,"/mealplan/").concat(a),{withCredentials:!0}).then((function(a){e.setState({mealplan:a.data,loading:!1})})).catch((function(e){console.log("Something went wrong",e)}))},e.updateShoppingList=function(a){var t=e.state.mealplan.shoppingList.map((function(e){if(e._id===a){var t=Object(U.a)({},e);return t.bought=!t.bought,t}return e}));g.a.put("".concat(h.API_URL,"/mealplan/").concat(e.state.mealplan._id,"/shopping_list"),{shoppingList:t},{withCredentials:!0}).then((function(a){e.setState({mealplan:a.data})}))},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadMealplan(this.props.match.params.mealplan_id)}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading..."))):(console.log(this.state.mealplan),l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,this.state.mealplan.title),l.a.createElement("div",{class:"row mealplan-tab"},l.a.createElement("div",{class:"col-3"},l.a.createElement("div",{class:"nav flex-column nav-pills",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"},l.a.createElement("a",{class:"nav-link active mealplan-nav-link",id:"v-pills-home-tab","data-toggle":"pill",href:"#v-pills-home",role:"tab","aria-controls":"v-pills-home","aria-selected":"true"},"Shopping List"),l.a.createElement("a",{class:"nav-link mealplan-nav-link",id:"v-pills-profile-tab","data-toggle":"pill",href:"#v-pills-profile",role:"tab","aria-controls":"v-pills-profile","aria-selected":"false"},"Recipes"))),l.a.createElement("div",{class:"col-9 mealplan-details-tabs"},l.a.createElement("div",{class:"tab-content",id:"v-pills-tabContent"},l.a.createElement("div",{class:"tab-pane fade show active",id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab"},l.a.createElement("ul",{className:"shoppinglist-container"},this.state.mealplan.shoppingList.map((function(a,t){var n=a.quantity>1?Math.round(a.quantity):a.quantity;return l.a.createElement("li",{key:t,className:"shoppinglist-items"},l.a.createElement("input",{type:"checkbox",checked:a.bought,onChange:function(){e.updateShoppingList(a._id)}}),l.a.createElement("p",{className:"shoppinglist-item-text"},n,"g  ",a.title))})))),l.a.createElement("div",{class:"tab-pane fade",id:"v-pills-profile",role:"tabpanel","aria-labelledby":"v-pills-profile-tab"},l.a.createElement("div",{className:"recipes-tab"},this.state.mealplan.recipes.map((function(e,a){return l.a.createElement(E.b,{to:"/recipe/".concat(e._id),className:"mealplan-recipe-link"},l.a.createElement("div",{class:"card mealplan-tab-recipe",style:{width:"18rem"},key:a},l.a.createElement("img",{src:e.image,class:"card-img-top",alt:"recipe-img"}),l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},e.title))))})))))))))}}]),t}(l.a.Component));function j(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"field"},l.a.createElement("div",{class:"control has-icons-left has-icons-right"},l.a.createElement("input",{class:"input is-rounded",name:"recipe",type:"text",onChange:e.onFilter,value:e.filter,placeholder:"Search"}),l.a.createElement("span",{class:"icon is-left"},l.a.createElement(b.a,{class:"fa fa-search",name:"search",size:"1x",style:{color:"lightgrey"}})))))}var x=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={recipe:""},e.handleRecipeUpdate=function(a){a.preventDefault();var t=e.props.match.params.recipe_id;if(e.state.imageSource!==e.state.recipe.image){var n=a.target.image.files[0],l=new FormData;l.append("imageUrl",n),g.a.post("".concat(h.API_URL,"/upload"),l).then((function(a){e.updateRecipe(t,a.data.secure_url)}))}else e.updateRecipe(t,e.state.recipe.image)},e.updateRecipe=function(a,t){g.a.put("".concat(h.API_URL,"/recipe/").concat(a),{title:e.state.recipe.title,image:t,steps:e.state.recipe.steps,ingredients:e.state.recipe.ingredientText,number_of_portions:e.state.recipe.number_of_portions,type:e.state.recipe.type},{withCredentials:!0}).then((function(){e.props.onUpdate()})).then((function(){e.props.history.push("/home")}))},e.handleTitleChange=function(a){var t=JSON.parse(JSON.stringify(e.state.recipe));t.title=a.target.value,e.setState({recipe:t})},e.handleImageChange=function(a){var t=new FileReader;t.readAsDataURL(a.target.files[0]),t.onloadend=function(){e.setState({imageSource:t.result})}},e.handleStepsChange=function(a){var t=JSON.parse(JSON.stringify(e.state.recipe));t.steps=a.target.value,e.setState({recipe:t})},e.handleIngredientsChange=function(a){var t=JSON.parse(JSON.stringify(e.state.recipe));t.ingredientText=a.target.value,e.setState({recipe:t})},e.handlePortionsChange=function(a){var t=JSON.parse(JSON.stringify(e.state.recipe));t.number_of_portions=a.target.value,e.setState({recipe:t})},e.handleTypeChange=function(a){var t=JSON.parse(JSON.stringify(e.state.recipe));t.type=a.target.value,e.setState({recipe:t})},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.recipe_id;g.a.get("".concat(h.API_URL,"/recipe/").concat(a),{withCredentials:!0}).then((function(a){e.setState({recipe:a.data,imageSource:a.data.image})}))}},{key:"render",value:function(){if(this.state.loading)return l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")));var e=this.state.recipe,a=e.title,t=e.steps,n=e.type,r=e.number_of_portions,i=e.ingredientText;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"recipe-form edit-recipe-form"},l.a.createElement("h1",{className:"recipes-title"},"Edit your recipe"),l.a.createElement("div",{className:"recipe-form"},l.a.createElement("form",{onSubmit:this.handleRecipeUpdate},l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"text",name:"title",class:"form-control create-form-input",onChange:this.handleTitleChange,value:a})),l.a.createElement("div",{class:"form-group"},l.a.createElement("img",{src:this.state.imageSource,alt:"recipe-img"}),l.a.createElement("input",{type:"file",name:"image",class:"form-control create-file-input",onChange:this.handleImageChange})),l.a.createElement("div",{class:"form-group"},l.a.createElement("textarea",{class:"form-control create-steps-input",name:"steps",rows:"5",onChange:this.handleStepsChange,value:t})),l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"text",name:"ingredients",class:"form-control create-ingredient-input",onChange:this.handleIngredientsChange,value:i})),l.a.createElement("div",{className:"type-portion-div type-portion-div"},l.a.createElement("select",{name:"type",className:"select-type",value:n,onChange:this.handleTypeChange},l.a.createElement("option",{disabled:!0,selected:!0,hidden:!0},"Meal type"),l.a.createElement("option",null,"Breakfast"),l.a.createElement("option",null,"Lunch"),l.a.createElement("option",null,"Dinner"),l.a.createElement("option",null,"Snack")),l.a.createElement("div",{class:"form-group"},l.a.createElement("input",{type:"number",min:"0",name:"portions",class:"form-control portions-input",onChange:this.handlePortionsChange,value:r}))),l.a.createElement("div",{className:"submit-form-bnt-div"},l.a.createElement("button",{type:"submit",class:"btn submit-btn"},"Submit"))))))}}]),t}(l.a.Component),A=(t(78),function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={recipes:[],loading:!0},e.getRecipes=function(){g.a.get("".concat(h.API_URL,"/my-recipes"),{withCredentials:!0}).then((function(a){e.setState({recipes:a.data,loading:!1})})).catch((function(a){console.log(a),401===a.response.status&&e.props.history.push("/login")}))},e.deleteRecipe=function(a){g.a.delete("".concat(h.API_URL,"/recipe/").concat(a),{withCredentials:!0}).then((function(a){e.getRecipes()}))},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getRecipes()}},{key:"render",value:function(){var e=this;return this.props.loggedInUser?this.state.loading?l.a.createElement("div",{className:"loading-div"},l.a.createElement("div",{class:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading...")),l.a.createElement("div",{class:"spinner-grow",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{class:"sr-only"},"Loading..."))):l.a.createElement("div",{className:"my-recipes-page"},l.a.createElement("div",{className:"my-recipes-header"},l.a.createElement("h1",{className:"recipes-title"},"My recipes")),l.a.createElement("div",{className:"my-recipes-div"},this.state.recipes.map((function(a,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"card my-recipes-card",style:{width:"18rem"},key:t},l.a.createElement(E.b,{to:"/recipe/".concat(a._id),className:"my-recipes-recipe-title"},l.a.createElement("img",{src:a.image,class:"card-img-top",alt:"recipe-img"}),l.a.createElement("div",{class:"card-body"},l.a.createElement("h5",{class:"card-title"},a.title))),l.a.createElement("button",{class:"btn recipe-btn",type:"submit"},l.a.createElement(E.b,{to:"/edit-recipe/".concat(a._id),style:{color:"black"}},"Edit")),l.a.createElement("button",{class:"btn recipe-btn-delete",type:"submit",onClick:function(){e.deleteRecipe(a._id)}},"Delete")))})))):l.a.createElement("div",null,l.a.createElement("div",{className:"mealplan-basket-jumbotron"},l.a.createElement("div",{class:"jumbotron"},l.a.createElement("h5",{class:"lead"},"Your are not logged in."),l.a.createElement(E.b,{to:"/login",class:"btn add-mealplan-btn"},"Log in"))))}}]),t}(l.a.Component)),F=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={recipes:[],loggedInUser:null,filterText:"",mealplanBasket:[]},e.getRecipes=function(){g.a.get("".concat(h.API_URL,"/recipes")).then((function(a){e.setState({recipes:a.data,filteredRecipes:a.data})})).catch((function(a){401===a.response.status&&e.props.history.push("/login")}))},e.getUser=function(){g.a.get("".concat(h.API_URL,"/user"),{withCredentials:!0}).then((function(a){e.setState({loggedInUser:a.data})})).catch((function(a){401===a.response.status&&e.props.history.push("/login")}))},e.handleSignup=function(a){a.preventDefault();var t=a.target.username.value,n=a.target.email.value,l=a.target.password.value;g.a.post("".concat(h.API_URL,"/signup"),{username:t,email:n,password:l},{withCredentials:!0}).then((function(a){e.setState({loggedInUser:a.data},(function(){e.props.history.push("/home")}))}))},e.handleLogin=function(a){a.preventDefault();var t=a.target.email.value,n=a.target.password.value;g.a.post("".concat(h.API_URL,"/signin"),{email:t,password:n},{withCredentials:!0}).then((function(a){e.setState({loggedInUser:a.data},(function(){e.props.history.push("/home")}))}))},e.handleLogout=function(){console.log(document.cookie),g.a.post("".concat(h.API_URL,"/logout")).then((function(a){localStorage.setItem("currentMealplanBasket","[]"),e.setState({loggedInUser:null,mealplanBasket:[]},(function(){e.props.history.push("/login")}))}))},e.recipeCreated=function(a){e.setState({recipes:[].concat(Object(c.a)(e.state.recipes),[a])},(function(){e.props.history.push("/home")}))},e.handleAddToMealplan=function(a,t){a.preventDefault();var n=Object(c.a)(e.state.mealplanBasket);n.push(t),localStorage.setItem("currentMealplanBasket",JSON.stringify(n)),e.setState({mealplanBasket:n})},e.handleSaveMealplan=function(a){a.preventDefault();var t=a.target.mealplanName.value;g.a.post("".concat(h.API_URL,"/mealplan"),{title:t,recipes:e.state.mealplanBasket},{withCredentials:!0}).then((function(a){e.setState({mealplanBasket:[]}),localStorage.setItem("currentMealplanBasket",JSON.stringify([])),e.props.history.push("/mealplans")}))},e.handleFilterRecipes=function(a){var t=a.target.value;e.setState({filterText:t})},e.filterRecipes=function(){return e.state.recipes.filter((function(a){return a.title.toLowerCase().includes(e.state.filterText.toLowerCase())}))},e.handleDeleteRecipeFromMealplanBasket=function(a){var t=JSON.parse(localStorage.getItem("currentMealplanBasket")).filter((function(e){return e._id!==a._id}));localStorage.setItem("currentMealplanBasket",JSON.stringify(t)),e.setState({mealplanBasket:t})},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({mealplanBasket:JSON.parse(localStorage.getItem("currentMealplanBasket"))||[]}),this.getRecipes(),this.state.loggedInUser||this.getUser()}},{key:"render",value:function(){var e=this,a=this.state.loggedInUser;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header"},l.a.createElement(f,{loggedInUser:this.state.loggedInUser,numberOfItemsInBasket:this.state.mealplanBasket.length,onLogout:this.handleLogout})),l.a.createElement("div",{className:"home-div"},l.a.createElement(d.d,null,l.a.createElement(d.b,{exact:!0,path:"/"},l.a.createElement(d.a,{to:"/home"})),l.a.createElement(d.b,{exact:!0,path:"/home",render:function(a){return l.a.createElement(l.a.Fragment,null,l.a.createElement(O,null),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"filter-div"},l.a.createElement("h1",{className:"recipes-title"},"Recipes"),l.a.createElement(j,{filter:e.state.filterText,onFilter:e.handleFilterRecipes})),l.a.createElement(y,Object.assign({filteredRecipes:e.filterRecipes(),onAddToMealplan:e.handleAddToMealplan,showAddButton:!1},a))))}}),l.a.createElement(d.b,{path:"/mealplans",render:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(R,{loggedInUser:a}))}}),l.a.createElement(d.b,{path:"/create-recipe",render:function(t){return l.a.createElement("div",{className:"container"},l.a.createElement(k,Object.assign({loggedInUser:a,onRecipeCreated:e.recipeCreated},t)))}}),l.a.createElement(d.b,{path:"/recipe/:recipe_id",render:function(e){return l.a.createElement("div",{className:"container"},l.a.createElement(C,e))}}),l.a.createElement(d.b,{path:"/login",render:function(a){return l.a.createElement("div",{className:"forms container"},l.a.createElement(S,Object.assign({onLogin:e.handleLogin},a)),l.a.createElement(_,Object.assign({onSignup:e.handleSignup},a)))}}),l.a.createElement(d.b,{exact:!0,path:"/mealplan-basket",render:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,{loggedInUser:a,mealplanBasket:e.state.mealplanBasket,onSaveMealplan:e.handleSaveMealplan,onDelete:e.handleDeleteRecipeFromMealplanBasket}))}}),l.a.createElement(d.b,{exact:!0,path:"/mealplan/:mealplan_id",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(M,Object.assign({loggedInUser:a},e)))}}),l.a.createElement(d.b,{exact:!0,path:"/edit-recipe/:recipe_id",render:function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(x,Object.assign({loggedInUser:a},t,{onUpdate:e.getRecipes})))}}),l.a.createElement(d.b,{path:"/my-recipes",render:function(e){return console.log(a),l.a.createElement("div",{className:"container"},l.a.createElement(A,Object.assign({loggedInUser:a},e)))}}))),l.a.createElement(w,null))}}]),t}(l.a.Component),D=Object(d.g)(F);i.a.render(l.a.createElement(E.a,null,l.a.createElement(D,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d50894bc.chunk.js.map